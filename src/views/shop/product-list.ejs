<%- include('../includes/head.ejs') %>
  <link rel="stylesheet" href="/css/error.css" />
  <link rel="stylesheet" href="/css/queries.css" />

  </head>

  <body>
    <img class="background" src="/images/background@2x.jpg" alt="" />
    <!-- <div class="sphere1"></div>
  <div class="sphere2"></div>
  <div class="sphere3"></div>
  <div class="sphere4"></div> -->

    <%- include('../includes/navigation.ejs') %>
      <main>
        <div class="container">
          <% if (products.length> 0) { %>
            <!-- CARD GRID -->
            <div class="products grid grid--2-cols">
              <% for( let product of products ) { %>
                <!-- CARD -->
                <div class="product card">
                  <img src="/images/test-product.jpg" alt="<%= product.title %>" class="product-img" />

                  <div class="product-details">
                    <p class="product-title">
                      <%= product.title %>
                    </p>
                    <p class="product-description">
                      <%= product.description.length> 100 ? product.description.slice(0, 99).trim() + '...' :
                        product.description %>
                    </p>
                    <p class="product-price">$<%= product.price %>
                    </p>
                  </div>

                  <div class="card-actions">
                    <form action="/cart" method="post">
                      <button class="add-to-cart">Add To Cart</button>
                      <input type="hidden" name="_id" value="<%= product._id %>">
                    </form>

                    <form action="/products/<%= product._id %>" method="get">
                      <button class="details">Details</button>
                    </form>
                  </div>
                </div>
                <% } %>
            </div>
            <!-- PAGINATION -->
            <nav class="pagination margin-bottom-md">
              <ul class="pagination-links">
                <li><a href="#" class="pagination-link">1</a></li>
                <li><a href="#" class="pagination-link">2</a></li>
                <li><a href="#" class="pagination-link">3</a></li>
                <li><a href="#" class="pagination-link">4</a></li>
                <li><a href="#" class="pagination-link">5</a></li>
              </ul>
            </nav>
            <% } else { %>
              <div class="error-card card card--linear margin-bottom-sm">
                <h1 class="error-code">Boo<i class="fa-solid fa-ghost"></i>!</h1>
                <p class="error-title">No Products Found!</p>
                <p class="error-subtitle margin-bottom-sm">
                  But you can create new ones!
                </p>
                <p class="error-message">[üõçÔ∏è Products took a sabbatical üõí]</p>
              </div>
              <% } %>



                <%- include('../includes/end.ejs') %>
